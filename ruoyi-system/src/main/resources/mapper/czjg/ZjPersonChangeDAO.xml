<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.czjg.zjrw.dao.ZjPersonChangeDAO">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.ruoyi.czjg.zjrw.domain.entity.ZjPersonChange">
        <id column="id" property="id" />
        <result column="projectId" property="projectId" />
        <result column="projectName" property="projectName" />
        <result column="projectChildId" property="projectChildId" />
        <result column="projectChildName" property="projectChildName" />
        <result column="recordId" property="recordId" />
        <result column="recorder" property="recorder" />
        <result column="subDate" property="subDate" />
        <result column="isContract" property="isContract" />
        <result column="changeType" property="changeType" />
        <result column="changeTypeName" property="changeTypeName" />
        <result column="changeUnit" property="changeUnit" />
        <result column="changeUnitName" property="changeUnitName" />
        <result column="changePost" property="changePost" />
        <result column="changePostName" property="changePostName" />
        <result column="beforePersonId" property="beforePersonId" />
        <result column="beforePerson" property="beforePerson" />
        <result column="beforeCode" property="beforeCode" />
        <result column="afterPersonId" property="afterPersonId" />
        <result column="afterPerson" property="afterPerson" />
        <result column="afterCode" property="afterCode" />
        <result column="changeReason" property="changeReason" />
        <result column="status" property="status" />
        <result column="order" property="order" />
        <result column="processInstanceId" property="processInstanceId" />
        <result column="processDefinitionKey" property="processDefinitionKey" />
    </resultMap>

    <resultMap id="fileMap" type="com.ruoyi.common.core.domain.model.ZjPersonChangeFile">
        <id column="id" property="id" />
        <result column="gid" property="gid" />
        <result column="fileId" property="fileId" />
        <result column="fileName" property="fileName" />
        <result column="uploadTime" property="uploadTime" />
        <result column="uploadPersonId" property="uploadPersonId" />
        <result column="uploadPerson" property="uploadPerson" />
        <result column="businessKey" property="businessKey" />
    </resultMap>

    <insert id="newPersonChange">
        insert into zj_person_change (`projectId`, `projectName`, `projectChildId`, `projectChildName`,
         `recordId`, `recorder`, `subDate`, `isContract`, `changeType`, `changeTypeName`, `changeUnit`,
         `changeUnitName`, `changePost`, `changePostName`, `beforePersonId`, `beforePerson`, `beforeCode`,
         `afterPersonId`, `afterPerson`, `afterCode`, `changeReason`, `status`, `order`, `processInstanceId`,
         `businessKey`) values
         (#{projectId}, #{projectName}, #{projectChildId}, #{projectChildName}, #{recordId}, #{recorder},
         #{subDate}, #{isContract}, #{changeType}, #{changeTypeName}, #{changeUnit}, #{changeUnitName},
         #{changePost} , #{changePostName}, #{beforePersonId}, #{beforePerson}, #{beforeCode}, #{afterPersonId},
         #{afterPerson}, #{afterCode}, #{changeReason}, #{status}, #{order}, #{processInstanceId}, #{businessKey})
    </insert>

    <insert id="addPersonFile">
        insert into zj_person_change_file(`gid`, `fileId`, `fileName`, `uploadTime`, `uploadPersonId`, `uploadPerson`)
        values (#{gid}, #{fileId}, #{fileName}, #{uploadTime}, #{uploadPersonId}, #{uploadPerson});
    </insert>
</mapper>
